"use strict";function Reg(){this.previewPictures()}Reg.prototype.previewPictures=function(){var o=this,e=["bmp","jpg","tiff","gif","pcx","tga","exif","fpx","svg","psd","cdr","pcd","dxf","ufo","eps","ai","raw","png"];$("#ImgFile").on("change",function(){var n=[];$.each(this.files,function(l,t){var i=o.getFileSuffix(t.name);e.indexOf(i)!=-1&&n.push(t)}),n&&n.length>0?(console.log(n),o.ajax_upload(n)):console.log("请选择图片格式")})},Reg.prototype.getFileSuffix=function(o){return o.substring(o.lastIndexOf(".")+1)},Reg.prototype.ajax_upload=function(o){var e=this;multiFileUpload({url:"/users/upload",files:o,uploaduStart:function(o){console.log("开始上传")},uploadedBeing:function(o){if(o.lengthComputable){var e=Math.round(100*o.loaded/o.total);console.log("进度",e)}},uploadSuccess:function(o){console.log("上传成功")},uploadError:function(o){console.log("发生错误")},uploadCancelled:function(o){console.log("操作被取消")},uploadEnd:function(o){console.log("传输结束，不管成功失败都会被触发")},serviceCallback:function(o){console.log(o),e.checkFileChange(JSON.parse(o).fileUrl)}})},Reg.prototype.checkFileChange=function(o){$("#showBox").css("display","block"),$("#previewPicturesImg").attr("src","/file/"+o),$("#avatar").val(o)},$(function(){new Reg});